# Homophily and assortative mixing
# 同质性和分类性混合

![7.12](/Chapter7/C7-pic/c7-7-1.png)
>图为美国高中的友谊网络。该网络中的节点代表美国高中的 470 名学生（年龄在 14 到 18 岁之间）。节点按种族进行颜色编码，如密钥中所示。数据来自全国青少年健康纵向研究

**人们似乎有一种强烈的倾向，即与他们认为在某些方面与自己相似的其他人交往。这种趋势被称为同质或分类混合**

非同质混合(disassortative mixing)同样出现在社会中, 即人们倾向于与与他们不同的其他人交往。可能最普遍和最熟悉的不相称混合的例子是性接触网络中的性别混合。

在一些非社交网络中也可以看到分类（或不分类）混合。例如，在引文网络中，论文倾向于引用同一领域的其他论文，而不是引用不同领域的论文。同样，以特定语言编写的网页往往会链接到使用相同语言的其他网页

## Assortative mixing by ordered characteristics
## 按无序特征进行混合
**如果网络中很大一部分边在相同类型的节点之间运行，则该网络是分类网络**、
假设我们有一个网络，其中的节点是根据具有有限可能值集的某些特征进行分类的。这些值只是描述性的，不按任何特定顺序排列，如国籍、性别、种族等
> 我们找到在相同类型的节点之间运行的边的分数，然后我们从该图中减去我们期望找到的边的分数，如果边是随机定位的，而不考虑节点类型。例如，对于所有节点都是单一类型的普通情况，100% 的边在相同类型的节点之间运行，但如果边是随机放置的，这也是预期的数字，因为没有其他地方可用于边缘下降
如果边随机放置，则连接相同类型的节点与连接不同类型节点的边取决于不同类型节点的比例（超几何分布）
$$\sum_{\text {edges }(i, j)} \delta_{g_{i} g_{j}}=\frac{1}{2} \sum_{i j} A_{i j} \delta_{g_{i} g_{j}}$$
该公式中假设节点i的分类$g_i$( 可取1,2,3,,,N )为网络中的不同组，该式即为考虑到ij两点连线的混合性加权（？？？？？尚不太理解）

$$Q=\frac{1}{2 m} \sum_{i j}\left(A_{i j}-\frac{k_{i} k_{j}}{2 m}\right) \delta_{g_{i} g_{j}}$$
Q函数公式，表示网络中模块性（Modulity）的一个参数，可用于判断网络的社团或分类是否最优，此函数考虑到了网络中任意两节点是否直接链接、不同节点随机链接的可能、两节点度值在整个网络中的权重（度值越高，Q值越低）、网络中总边数的权重
> 模块性是网络中同类连接程度的度量。严格来说，它小于1，如果同一类型的节点之间的边比我们随机期望的多，则取正值。如果这样的边缘比我们预期的要少，它也可以取负值。如上图高校友情网络的模块性值为0.305

后面公式太复杂了看不懂，不知道什么意思


## Assortative mixing by ordered characteristics
## 按有序特征进行混合
**如果具有相似标量特征值的网络节点比具有不同值的网络节点更频繁地连接在一起，则根据该特征，网络被认为是混合混合的**
>例如，如果人们与年龄相近的其他人成为朋友，那么网络就会按年龄分类混合。有时你也听到有人说这样的网络是按年龄分层的，这意味着同样的事情——可以将年龄视为一维尺度或轴，不同年龄的个体在网络中形成相互连接的**层**

如下图按照年龄排序的友谊分布图，图中每一个点都代表了一对朋友关系，横纵轴分别是各自的朋友年龄数据
![7.12](/Chapter7/C7-pic/c7-7-2.png)    

采用计算协方差的方法衡量不同边所连接节点属性的均衡性
$$\mu=\frac{\sum_{i j} A_{i j} x_{i}}{\sum_{i j} A_{i j}}=\frac{1}{2 m} \sum_{i} k_{i} x_{i}$$
$x_i$ 是我们感兴趣的标量（年龄、收入等）的节点 i 的值。$\mu$为一条边所连接两节点的标量均值
$$
\begin{aligned}
\operatorname{cov}\left(x_{i}, x_{j}\right) &=\frac{\sum_{i j} A_{i j}\left(x_{i}-\mu\right)\left(x_{j}-\mu\right)}{\sum_{i j} A_{i j}} \\
&=\frac{1}{2 m} \sum_{i j} A_{i j}\left(x_{i} x_{j}-\mu x_{i}-\mu x_{j}+\mu^{2}\right) \\
&=\frac{1}{2 m} \sum_{i j} A_{i j} x_{i} x_{j}-\mu^{2} \\
&=\frac{1}{2 m} \sum_{i j} A_{i j} x_{i} x_{j}-\frac{1}{(2 m)^{2}} \sum_{i j} k_{i} k_{j} x_{i} x_{j} \\
&=\frac{1}{2 m} \sum_{i j}\left(A_{i j}-\frac{k_{i} k_{j}}{2 m}\right) x_{i} x_{j}
\end{aligned}
$$

总的来说，如果边的任一端的值 xi 和 x j 趋于大或小，则协方差将为正，如果它们趋向于在相反方向变化，则协方差将为负。

**换句话说，当我们有分类混合时，协方差将为正，而对于非分类混合，协方差为负**

对于一个完美分类混合的网络来说，即相同标量的节点被连接在一起（即使事实上很难做到），当$x_i =  x_j$时下式成立（为什么成立啊？前半部分我看得懂，后面就不懂了）

$$\frac{1}{2 m} \sum_{i j}\left(A_{i j} x_{i}^{2}-\frac{k_{i} k_{j}}{2 m} x_{i} x_{j}\right)=\frac{1}{2 m} \sum_{i j}\left(k_{i} \delta_{i j}-\frac{k_{i} k_{j}}{2 m}\right) x_{i} x_{j},$$

## Assortative mixing by degree
## 按度值混合

根据标量进行分类混合的一种特殊情况，也是一种特别有趣的情况
![7.12](/Chapter7/C7-pic/c7-7-3.png)    
> (a) 一个按度分类的网络，显示高度节点的特征密集核心被低度节点的外围包围。 (b) 一个不相配的网络，显示出这种情况下的星状结构特征

- 在一个分类网络中，高度节点倾向于粘在一起，人们期望在网络中得到一个高度节点的簇或核心，周围是较低度节点的较不密集的外围。这种核心-外围结构是许多网络的共同特征，尤其是社交网络，发现按程度混合，上图a 显示了一个小型的混合网络，其中核心-外围结构清晰可见

- 另一方面，如果网络按度数不相称地混合，则高度节点往往会连接到度数低的节点，从而在网络中创建通常容易看到的星形特征。图 7.14b 显示了一个小型非分类网络的示例。不分类网络通常没有核心-外围分裂，而是更加统一

计算方法如`按有序特征进行混合`